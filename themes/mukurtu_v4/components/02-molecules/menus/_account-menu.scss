@use "../../../external/include-media";

.menu__account-menu {
  display: flex;
  flex-flow: row wrap;
  justify-content: center;
  column-gap: var(--v-space-2xs);
  inline-size: 100%;
  margin: 0;
  margin-block: var(--v-space-2xs);
  padding: 0;

  @include include-media.media(">=lg") {
    padding: 0;
    margin-block: 0;
  }

  a svg.ext {
    fill: var(--color-white);

    path {
      stroke: var(--color-white);
    }
  }
}

.account-menu__menu-item {
  position: relative;
  list-style: none;
  min-inline-size: 100%;

  @include include-media.media("<lg") {
    & * {
      float: inline-start;
    }
  }

  .menu__account-submenu {
    display: none;
    visibility: hidden;
    opacity: 0;
    padding: 0;
    padding-inline-start: var(--v-space-3xs);
    inline-size: 100%;
  }

  @include include-media.media(">=lg") {
    min-inline-size: auto;

    &.account-menu__menu-item--level-1 {
      .account-menu__menu-link--level-1 {
        padding: var(--v-space-5xs);
        display: block;
        min-block-size: 100%;
      }
    }

    &.account-menu__menu-item--has-children {
      display: flex;
      align-items: center;
      gap: var(--v-space-5xs);


    .menu__account-submenu {
        position: absolute;
        inset-block-start: 100%;
        inset-inline-start: 0;
        min-inline-size: 200px;
        background: var(--brand-primary-dark);
        box-shadow: 0 4px 8px rgb(0 0 0 / 10%);
        visibility: hidden;
        opacity: 0;
        z-index: 1000;

        .account-menu__menu-item {
          display: block;
        }
      }
    }
  }

  &.account-menu__menu-item--expanded {
    @include include-media.media(">=lg") {
      background: var(--brand-primary-dark);
    }

    .menu__account-submenu {
      display: block;
      visibility: visible;
      opacity: 1;
      inline-size: 100%;
      background: var(--brand-primary-dark);
    }
  }
}

.account-menu__button-toggle {
  background: transparent;
  padding: var(--v-space-6xs);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.12s ease-in;
  margin-inline-start: var(--v-space-5xs);

  @include include-media.media(">=lg") {
    min-block-size: 100%;
    margin-inline-start: 0;
  }

  &:hover,
  &:focus {
    background: transparent;
  }

  &:focus {
    outline: 2px solid var(--color-white);
    outline-offset: 2px;
  }
}

.account-menu__toggle-icon {
  inline-size: 12px;
  block-size: 9px;
  transition: transform 0.2s ease;
  margin-block-start: 7px;

  &::before {
    content: "";
    display: block;
    inline-size: 0;
    block-size: 0;
    border-inline-start: 6px solid transparent;
    border-inline-end: 6px solid transparent;
    border-block-start: 6px solid currentcolor;
  }
}

.account-menu__button-toggle[aria-expanded="true"] .account-menu__toggle-icon {
  transform: rotate(180deg);
}

.account-menu__menu-link {
  color: var(--light-text-color);
  font-weight: var(--text-bold);
  text-decoration: underline solid 2px var(--color-transparent);
  text-underline-offset: 2px;
  transition:
    color 0.12s ease-in,
    text-decoration-color 0.12s ease-in;

  &:hover {
    text-decoration-color: var(--light-text-color);
    transition: text-decoration-color 0.12s ease-in;
  }

  &:hover,
  &:focus,
  &:focus-visible,
  &:active,
  &.is-active {
    color: var(--brand-light-accent);
    background-color: var(--brand-primary-dark);
  }

  &:focus,
  &:focus-visible,
  &:active {
    outline-color: var(--color-white);
  }

  &.account-menu__menu-link--level-2 {
    display: block;
    padding-block: var(--v-space-6xs);

    &::before {
      content: "+";
      margin-inline-end: var(--v-space-6xs);
    }

    &:hover,
    &:focus {
      &::before {
        text-decoration: none;
      }
    }
  }
}
